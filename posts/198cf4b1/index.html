<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>Python爬虫逆向(1)--加密算法 | 一方天地</title><meta name="generator" content="hexo-theme-ayer"><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/dist/main.css"><link rel="stylesheet" href="/css/fonts/remixicon.css"><link rel="stylesheet" href="/css/custom.css"><script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"><script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script><style>.swal2-styled.swal2-confirm{font-size:1.6rem}</style></head></html><body><div id="app"><canvas class="fireworks"></canvas><style>.fireworks{position:fixed;left:0;top:0;z-index:99999;pointer-events:none}</style><main class="content on"><section class="outer"><article id="post-Python爬虫逆向-1-加密算法" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal><div class="article-inner"><header class="article-header"><h1 class="article-title sea-center" style="border-left:0" itemprop="name">Python爬虫逆向(1)--加密算法</h1></header><div class="article-meta"><a href="/posts/198cf4b1/" class="article-date"><time datetime="2022-05-06T12:04:44.000Z" itemprop="datePublished">2022-05-06</time></a><div class="article-category"><a class="article-category-link" href="/categories/Python/">Python</a> / <a class="article-category-link" href="/categories/Python/%E7%88%AC%E8%99%AB/">爬虫</a></div><div class="word_count"><span class="post-time"><span class="post-meta-item-icon"><i class="ri-quill-pen-line"></i> <span class="post-meta-item-text">字数统计:</span> <span class="post-count">2.9k</span> </span></span><span class="post-time">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="ri-book-open-line"></i> <span class="post-meta-item-text">阅读时长≈</span> <span class="post-count">12 分钟</span></span></span></div></div><div class="tocbot"></div><div class="article-entry" itemprop="articleBody"><blockquote><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1hY411P7g7">https://www.bilibili.com/video/BV1hY411P7g7</a></p></blockquote><h2 id="加密方式">加密方式</h2><ul><li>加密在前端开发和爬虫中是经常遇到的，掌握加密算法并且可以将加密的密文进行解密破解，且加密算法的熟练和剖析有助于帮助我们实现高效的 js 逆向，但我们基于爬虫的使用考虑所以不必去深究加密的具体实现方式</li><li>常见的加密算法基本分为几类：<ul><li>线性散列算法（签名算法）MD5</li><li>对称性加密算法 AES DES</li><li>非对称性加密算法 RSA</li></ul></li></ul><span id="more"></span><h3 id="MD5-加密">MD5 加密</h3><ul><li>MD5 是一种被广泛使用的线性散列算法，可以产生一个 128 位(16 字节)的散列值(hash value)，用于确保信息传输完整的一致性，且加密之后产生的是一个固定长度(32 位或 16 位)的数据。</li><li>解密：<ul><li>常规来说，MD5 是不存在解密的。但是理论上 MD5 是可以进行反向暴力破解的。暴力破解的大致原理就是用很多不用的数据进行加密后跟已有的加密数据进行对比，由此来寻找规律。理论上只要数据量足够庞大，MD5 是可以被破解的，但是要注意，破解 MD5 是需要考虑破解的成本(时间和机器性能)。假设破解当前的 MD5 密码需要目前计算能力最优秀的计算机工作 100 年才能破解完成，那么当前的 MD5 密码就是安全的。</li><li>增加破解的成本的方法<ul><li>使用一段无意义且随机的私钥进行 MD5 加密会生成一个加密串，我们暂时称之为串 1</li><li>将要加密的数据跟串 1 拼接，再进行一次 MD5，这是会生成串 2</li><li>将串 2 再次进行 MD5 加密，这时生成的串 3 就是我们加密后的数据</li></ul></li><li>在注册账号时的密码一般都是用的 MD5 加密</li></ul></li></ul><div class="highlight-wrap" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> hashCode = md5(<span class="string">&quot;i am bobo!&quot;</span>);</span></span><br><span class="line"><span class="javascript">        alert(hashCode)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h3 id="DES-AES-加密">DES/AES 加密</h3><ul><li>DES 全称为 Data Encryption Standard，即数据加密标准，是一种使用密钥加密的算法。该加密算法是一种对称加密方式，其加密运算、解密运算需要使用的是同样的密钥(一组字符串)即可。</li><li>注意：<ul><li>现在用 AES 标准来替代原先的 DES</li><li>AES 和 DES 的区别：<ul><li>加密后密文长度不同：<ul><li>DES 加密后密文长度是 8 的整数倍</li><li>AES 加密后密文长度是 16 的整数倍</li></ul></li><li>应用场景的不同：<ul><li>企业级开发使用 DES 足够安全</li><li>如果要求高使用 AES</li></ul></li><li>DES 和 AES 切换只需要修改<code>CryptoJS.AES &lt;==&gt; CryptoJS.DES</code></li></ul></li><li>使用 DES/AES 进行数据交互时要求双方都拥有相同的私钥</li><li>破解方法：<ul><li>暴力破解</li><li>DES 如果使用 56 位的密钥，则可能的密钥数量是 2 的 56 次方个，只要计算足够强大是可以破解的</li></ul></li><li>DES 算法的入口参数有三个：<ul><li>Key、Data、Mode、padding<ul><li>Key 为 7 个字节共 56 位，是 DES 算法的工作密钥</li><li>Data 为 8 个字节 64 位，是要被加密或者被破解的数据</li><li>Mode 为 DES 的工作方式</li><li>padding 为填充模式，如果加密后密文长度如果达不到指定整数倍(8 个字节、16 个字节)，填充对应字符</li><li>padding 的赋值固定为<code>CryptoJS.pad.Pkcs7</code>即可</li></ul></li></ul></li></ul></li></ul><div class="highlight-wrap" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/crypto-js/3.1.9-1/crypto-js.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> aseKey = <span class="string">&quot;12345678&quot;</span>     <span class="comment">// 定制密钥 长度必须为 8/16/32位</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> message = <span class="string">&quot;i am bobo,who are you ?&quot;</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 加密</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> encrypt = CryptoJS.DES.encrypt(message, CryptoJS.enc.Utf8.parse(aseKey),&#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">mode</span>: CryptoJS.mode.ECB,</span></span><br><span class="line"><span class="javascript">            <span class="attr">padding</span>: CryptoJS.pad.Pkcs7</span></span><br><span class="line"><span class="javascript">        &#125;).toString();</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        alert(encrypt);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 解密</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> decrypt = CryptoJS.DES.decrypt(encrypt, CryptoJS.enc.Utf8.parse(aseKey),&#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">mode</span>: CryptoJS.mode.ECB,</span></span><br><span class="line"><span class="javascript">            <span class="attr">padding</span>: CryptoJS.pad.Pkcs7</span></span><br><span class="line"><span class="javascript">        &#125;).toString(CryptoJS.enc.Utf8);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        alert(decrypt);     <span class="comment">// 我是一个密码</span></span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h3 id="RSA-加密">RSA 加密</h3><ul><li>RSA 加密：<ul><li>是一种非对称加密算法。在公开密钥加密和电子商业中 RSA 被广泛使用</li></ul></li><li>非对称加密算法：<ul><li>非对称加密算法需要两个密钥：<ul><li>公开密钥（publicKey）</li><li>私有密钥（privateKey）</li><li>公钥与私钥是一对，如果用公钥对数据进行加密，只有用对应的私钥才能解密。因为加密和解密使用的是两个不同的密钥，所以这种算法叫做非对称加密算法</li></ul></li></ul></li><li>注意：<ul><li>使用时都是使用公钥加密使用私钥解密，公钥可以公开，私钥自己保留</li><li>算法强度复杂，安全性依赖于算法与密钥，但是由于其算法复杂，而使得加密解密速度没有对称加密解密的速度快</li></ul></li><li>使用流程和场景介绍<ul><li>通过公钥加密，使用私钥解密。私钥是通过公钥计算生成的。假设 ABC 三方之间相互要进行加密通信，大家相互之间使用公钥进行信息加密，信息读取时使用各自对应的私钥进行信息解密</li><li>用户输入的支付密码会通过 RSA 加密</li></ul></li><li>公钥私钥生成方式：<ul><li>公私钥可以在线生成：<a target="_blank" rel="noopener" href="http://web.chacuo.net/netrsakeypair">http://web.chacuo.net/netrsakeypair</a></li></ul></li></ul><div class="highlight-wrap" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/jsencrypt/3.0.0-beta.1/jsencrypt.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 公钥</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> PUBLIC_KEY = <span class="string">&#x27;-----BEGIN PUBLIC KEY-----MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCtC4HfAgbpbjzI/cGyi8KZwULy2uHRP4pKw5ZlsbWgDXT1CDcg3pd6fnFhPNNIhpl7AoxCLgfjVREuSqF1OPkx8ebJSMHHq3Oav2ilM2uSisBcsC5EeiPbTdMDA8unrazLJtYqA7xjhW929H7TPY9s3kPZAQzn6vZ9I0pfLaLxhQIDAQAB-----END PUBLIC KEY-----&#x27;</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 私钥</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> PRIVATE_KEY = <span class="string">&#x27;-----BEGIN PRIVATE KEY-----MIICeAIBADANBgkqhkiG9w0BAQEFAASCAmIwggJeAgEAAoGBAK0Lgd8CBuluPMj9wbKLwpnBQvLa4dE/ikrDlmWxtaANdPUINyDel3p+cWE800iGmXsCjEIuB+NVES5KoXU4+THx5slIwcerc5q/aKUza5KKwFywLkR6I9tN0wMDy6etrMsm1ioDvGOFb3b0ftM9j2zeQ9kBDOfq9n0jSl8tovGFAgMBAAECgYAuiujMbYQkZtUMjkv51ONrbXKvVTXljPyKLV8XTRv3x4bMnQAO5C/D75xZNf3yBNnlHwNQjYbrmya617HjkIZdel6MM5AiJZrgY+nSTUd+mY/Sx2T6GjSHE/HaM/KlISgjkjLGXfsQeykryi2iB47CLmWdY+OpzVf0LUl7Kr0soQJBANcBsWYRCXUs0Uu8G/gIJ4eJsI4jN88PdIw9/VEkTwiqUamOb3MirZGtinuJeIyeTXkL99Pc+aKSSRE84Vz6ed0CQQDOCbKsAXtHTB3zYz++Ri9Dbcwjjp9KprQoaD7DJ3utZnEIMHgNYJWbFYUTslsYVd+qWf9kVLj0HfJ+sOZOXZ/JAkEArx+N4tiVn381qj45ebkKmXco+1zsJBcuktwa7HBqf2Bay4RceqcQQMvdM+ow6jg2WhXJciNWoXgNU6EG3riVcQJBAIg3YSjW0eoRKLwAoePqAtVRgeUAJc/05qbQRK5BLEM3twLzCGvPrxkY4SJkiFVOcNDvLynl2WGLawbXbWvh+gECQQDCcsHipcB2iGfEuMpzryOUVmsXm5nr4Dab4k6eDiQ6dejU6Nd4yvsVfviVMdgbcvFlSUgQ+J6WREp5sPEDR1wZ-----END PRIVATE KEY-----&#x27;</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 使用公钥加密</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> encrypt = <span class="keyword">new</span> JSEncrypt();                  <span class="comment">// 实例化加密对象</span></span></span><br><span class="line"><span class="javascript">        encrypt.setPublicKey(PUBLIC_KEY);               <span class="comment">// 设置公钥</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> encrypted = encrypt.encrypt(<span class="string">&#x27;hello bobo!&#x27;</span>); <span class="comment">// 对指定数据进行加密</span></span></span><br><span class="line"><span class="javascript">        alert(encrypted)</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 使用私钥解密</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> decrypt = <span class="keyword">new</span> JSEncrypt();</span></span><br><span class="line"><span class="javascript">        decrypt.setPrivateKey(PRIVATE_KEY);             <span class="comment">// 设置私钥</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> uncrypted = decrypt.decrypt(encrypted);     <span class="comment">// 解密</span></span></span><br><span class="line"><span class="javascript">        alert(uncrypted);</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h3 id="base64-伪加密">base64 伪加密</h3><ul><li>Base64 是一种用 64 个字符来表示任意二进制数据的方法。base64 是一种编码方式而不是加密算法，只是看上去像是加密而已</li><li>Base64 使用 A–Z, a–z, 0–9, +, / 这 64 个字符实现对数据进行加密</li></ul><div class="highlight-wrap" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">		<span class="comment">// 创建Base64对象</span></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> Base64=&#123;<span class="attr">_keyStr</span>:<span class="string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=&quot;</span>,<span class="attr">encode</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> t=<span class="string">&quot;&quot;</span>;<span class="keyword">var</span> n,r,i,s,o,u,a;<span class="keyword">var</span> f=<span class="number">0</span>;e=Base64._utf8_encode(e);<span class="keyword">while</span>(f&lt;e.length)&#123;n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n&gt;&gt;<span class="number">2</span>;o=(n&amp;<span class="number">3</span>)&lt;&lt;<span class="number">4</span>|r&gt;&gt;<span class="number">4</span>;u=(r&amp;<span class="number">15</span>)&lt;&lt;<span class="number">2</span>|i&gt;&gt;<span class="number">6</span>;a=i&amp;<span class="number">63</span>;<span class="keyword">if</span>(<span class="built_in">isNaN</span>(r))&#123;u=a=<span class="number">64</span>&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isNaN</span>(i))&#123;a=<span class="number">64</span>&#125;t=t+<span class="built_in">this</span>._keyStr.charAt(s)+<span class="built_in">this</span>._keyStr.charAt(o)+<span class="built_in">this</span>._keyStr.charAt(u)+<span class="built_in">this</span>._keyStr.charAt(a)&#125;<span class="keyword">return</span> t&#125;,<span class="attr">decode</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> t=<span class="string">&quot;&quot;</span>;<span class="keyword">var</span> n,r,i;<span class="keyword">var</span> s,o,u,a;<span class="keyword">var</span> f=<span class="number">0</span>;e=e.replace(<span class="regexp">/[^A-Za-z0-9+/=]/g</span>,<span class="string">&quot;&quot;</span>);<span class="keyword">while</span>(f&lt;e.length)&#123;s=<span class="built_in">this</span>._keyStr.indexOf(e.charAt(f++));o=<span class="built_in">this</span>._keyStr.indexOf(e.charAt(f++));u=<span class="built_in">this</span>._keyStr.indexOf(e.charAt(f++));a=<span class="built_in">this</span>._keyStr.indexOf(e.charAt(f++));n=s&lt;&lt;<span class="number">2</span>|o&gt;&gt;<span class="number">4</span>;r=(o&amp;<span class="number">15</span>)&lt;&lt;<span class="number">4</span>|u&gt;&gt;<span class="number">2</span>;i=(u&amp;<span class="number">3</span>)&lt;&lt;<span class="number">6</span>|a;t=t+<span class="built_in">String</span>.fromCharCode(n);<span class="keyword">if</span>(u!=<span class="number">64</span>)&#123;t=t+<span class="built_in">String</span>.fromCharCode(r)&#125;<span class="keyword">if</span>(a!=<span class="number">64</span>)&#123;t=t+<span class="built_in">String</span>.fromCharCode(i)&#125;&#125;t=Base64._utf8_decode(t);<span class="keyword">return</span> t&#125;,<span class="attr">_utf8_encode</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;e=e.replace(<span class="regexp">/rn/g</span>,<span class="string">&quot;n&quot;</span>);<span class="keyword">var</span> t=<span class="string">&quot;&quot;</span>;<span class="keyword">for</span>(<span class="keyword">var</span> n=<span class="number">0</span>;n&lt;e.length;n++)&#123;<span class="keyword">var</span> r=e.charCodeAt(n);<span class="keyword">if</span>(r&lt;<span class="number">128</span>)&#123;t+=<span class="built_in">String</span>.fromCharCode(r)&#125;<span class="keyword">else</span> <span class="keyword">if</span>(r&gt;<span class="number">127</span>&amp;&amp;r&lt;<span class="number">2048</span>)&#123;t+=<span class="built_in">String</span>.fromCharCode(r&gt;&gt;<span class="number">6</span>|<span class="number">192</span>);t+=<span class="built_in">String</span>.fromCharCode(r&amp;<span class="number">63</span>|<span class="number">128</span>)&#125;<span class="keyword">else</span>&#123;t+=<span class="built_in">String</span>.fromCharCode(r&gt;&gt;<span class="number">12</span>|<span class="number">224</span>);t+=<span class="built_in">String</span>.fromCharCode(r&gt;&gt;<span class="number">6</span>&amp;<span class="number">63</span>|<span class="number">128</span>);t+=<span class="built_in">String</span>.fromCharCode(r&amp;<span class="number">63</span>|<span class="number">128</span>)&#125;&#125;<span class="keyword">return</span> t&#125;,<span class="attr">_utf8_decode</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> t=<span class="string">&quot;&quot;</span>;<span class="keyword">var</span> n=<span class="number">0</span>;<span class="keyword">var</span> r=c1=c2=<span class="number">0</span>;<span class="keyword">while</span>(n&lt;e.length)&#123;r=e.charCodeAt(n);<span class="keyword">if</span>(r&lt;<span class="number">128</span>)&#123;t+=<span class="built_in">String</span>.fromCharCode(r);n++&#125;<span class="keyword">else</span> <span class="keyword">if</span>(r&gt;<span class="number">191</span>&amp;&amp;r&lt;<span class="number">224</span>)&#123;c2=e.charCodeAt(n+<span class="number">1</span>);t+=<span class="built_in">String</span>.fromCharCode((r&amp;<span class="number">31</span>)&lt;&lt;<span class="number">6</span>|c2&amp;<span class="number">63</span>);n+=<span class="number">2</span>&#125;<span class="keyword">else</span>&#123;c2=e.charCodeAt(n+<span class="number">1</span>);c3=e.charCodeAt(n+<span class="number">2</span>);t+=<span class="built_in">String</span>.fromCharCode((r&amp;<span class="number">15</span>)&lt;&lt;<span class="number">12</span>|(c2&amp;<span class="number">63</span>)&lt;&lt;<span class="number">6</span>|c3&amp;<span class="number">63</span>);n+=<span class="number">3</span>&#125;&#125;<span class="keyword">return</span> t&#125;&#125;</span></span><br><span class="line"><span class="javascript">		 </span></span><br><span class="line"><span class="javascript">		<span class="comment">// 定义字符串</span></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> string = <span class="string">&#x27;i am bobo!&#x27;</span>;</span></span><br><span class="line"><span class="javascript">		 </span></span><br><span class="line"><span class="javascript">		<span class="comment">// 加密</span></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> encodedString = Base64.encode(string);</span></span><br><span class="line"><span class="javascript">		alert(encodedString); </span></span><br><span class="line"><span class="javascript">		 </span></span><br><span class="line"><span class="javascript">		<span class="comment">// 解密</span></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> decodedString = Base64.decode(encodedString);</span></span><br><span class="line"><span class="javascript">		alert(decodedString); </span></span><br><span class="line"><span class="javascript">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		</span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h3 id="拓展：https加密">拓展：https加密</h3><ul><li><p>https 是基于 http 和 SSL/TLS 实现的一个协议，可以保证在网络上传输的数据都是加密的，从而保证数据安全</p></li><li><p>http 协议是不安全的</p><ul><li><p>在 http是诞生之前，所有网站都使用 http 协议，而 http 协议在数据传输过程中都是明文，所以可能存在数据泄露和篡改</p><p><img src="https://s2.loli.net/2022/05/08/vMQTWDi8OjEduNf.png" alt="数据传输"></p></li></ul></li><li><p>使用对称秘钥进行数据加密</p><ul><li>为了防止数据泄露和篡改，对数据进行加密，生成一个对称密码，将对称秘钥分别交给浏览器和服务器端，他们之间传输的数据都适用对称秘钥进行加密和解密</li></ul></li><li><p>请求和响应流程如下：</p><ul><li>客户端使用对称秘钥对请求进行加密，并发送给服务端。</li><li>服务端接收到密文之后，使用对称秘钥对密文进行解密，然后处理请求。 最后再使用对称秘钥把要返回的内容再次加密，返回给客户端。</li><li>客户端接收到密文之后，使用对称秘钥进行解密，并获取最终的响应内容。</li></ul></li><li><p>如此一来，数据传输都是密文，解决了明文传输数据的问题。但是，这么干有bug。</p><ul><li>浏览器如何获取对称秘钥？</li><li>每个客户端的对称秘钥相同，浏览器能拿到对称秘钥，那么黑客也可以拿到，所以，数据加密也就没有意义了。</li></ul></li><li><p>动态对称秘钥和非对称秘钥</p><ul><li>为了解决对称秘钥动态性以及让客户端和服务端安全的获取对称秘钥，可以引入非对称秘钥机制。</li><li>如此一来，解决了动态对称秘钥和数据加密的问题，因为每个用户的对称秘钥都是随机生成且传输的过程中都使用公钥加密（公钥加密的数据只有私钥能解密），所有黑客无法截获对称秘钥。而数据传输是通过对称秘钥加密过的，所以黑客即使能获取数据也无法去解密看到真实的内容。 看似无懈可击，但是，这么干还是又bug。</li><li>如果黑客在 【步骤2】劫持，黑客把自己的公钥返回给客客户端，那么客户端会使用黑客的公钥来加密对称秘钥，黑客在【步骤6】截获请求，使用自己的私钥获取对称秘钥，后面过程全都会完蛋…</li></ul></li><li><p>CA证书的应用</p><ul><li>使用 ca 证书可以解决黑客劫持的问题</li></ul></li></ul><p><img src="https://s2.loli.net/2022/05/08/frciSpLaeyhM6FE.png" alt=""></p><ul><li>如此一来，就解决了黑客劫持的问题，因为即使黑客劫持后的给浏览器即使返回了证书也无法通过校验，同时浏览器也会提示错误信息。</li><li>以上就是 https 的实现原理，https 可以保证数据安全，但由过程需要反复加密解密所有访问速度会有所下降（鱼和熊掌不能兼得）。</li></ul><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script></div><footer class="article-footer"><div class="share-btn"><span class="share-sns share-outer"><i class="ri-share-forward-line"></i> 分享</span><div class="share-wrap"><i class="arrow"></i><div class="share-icons"><a class="weibo share-sns" href="javascript:;" data-type="weibo"><i class="ri-weibo-fill"></i> </a><a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin"><i class="ri-wechat-fill"></i> </a><a class="qq share-sns" href="javascript:;" data-type="qq"><i class="ri-qq-fill"></i> </a><a class="douban share-sns" href="javascript:;" data-type="douban"><i class="ri-douban-line"></i> </a><a class="facebook share-sns" href="javascript:;" data-type="facebook"><i class="ri-facebook-circle-fill"></i> </a><a class="twitter share-sns" href="javascript:;" data-type="twitter"><i class="ri-twitter-fill"></i> </a><a class="google share-sns" href="javascript:;" data-type="google"><i class="ri-google-fill"></i></a></div></div></div><div class="wx-share-modal"><a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a><p>扫一扫，分享到微信</p><div class="wx-qrcode"><img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://example.com/posts/198cf4b1/" alt="微信分享二维码"></div></div><div id="share-mask"></div><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js%E9%80%86%E5%90%91/" rel="tag">js逆向</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%88%AC%E8%99%AB/" rel="tag">爬虫</a></li></ul></footer></div><nav class="article-nav"><a href="/posts/8c2409e0/" class="article-nav-link"><strong class="article-nav-caption">上一篇</strong><div class="article-nav-title">Python爬虫逆向(2)--微信公众号平台</div></a><a href="/posts/5b9d40f1/" class="article-nav-link"><strong class="article-nav-caption">下一篇</strong><div class="article-nav-title">16. 3Sum Closest</div></a></nav></article></section><footer class="footer"><div class="outer"><ul><li>Copyrights &copy; 2021-2022 <i class="ri-heart-fill heart_icon"></i> ZYZhang</li></ul><ul><li></li></ul><ul><li><span><span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span> <span class="division">|</span> <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span></span></li></ul><ul></ul><ul></ul><ul><li></li></ul></div></footer></main><div class="float_btns"><div class="totop" id="totop"><i class="ri-arrow-up-line"></i></div><div class="todark" id="todark"><i class="ri-moon-line"></i></div></div><aside class="sidebar on"><button class="navbar-toggle"></button><nav class="navbar"><div class="logo"><a href="/"><img src="/images/zhangguorong.ico" alt="一方天地"></a></div><ul class="nav nav-main"><li class="nav-item"><a class="nav-item-link" href="/">主页</a></li><li class="nav-item"><a class="nav-item-link" href="/archives">归档</a></li><li class="nav-item"><a class="nav-item-link" href="/categories">分类</a></li><li class="nav-item"><a class="nav-item-link" href="/tags">标签</a></li><li class="nav-item"><a class="nav-item-link" href="/about">关于我</a></li></ul></nav><nav class="navbar navbar-bottom"><ul class="nav"><li class="nav-item"><a class="nav-item-link nav-item-search" title="搜索"><i class="ri-search-line"></i></a></li></ul></nav><div class="search-form-wrap"><div class="local-search local-search-plugin"><input type="search" id="local-search-input" class="local-search-input" placeholder="Search..."><div id="local-search-result" class="local-search-result"></div></div></div></aside><div id="mask"></div><div id="reward"><span class="close"><i class="ri-close-line"></i></span><p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p><div class="reward-box"></div></div><script src="/js/jquery-3.6.0.min.js"></script><script src="/js/lazyload.min.js"></script><script src="/js/tocbot.min.js"></script><script>tocbot.init({tocSelector:".tocbot",contentSelector:".article-entry",headingSelector:"h1, h2, h3, h4, h5, h6",hasInnerContainers:!0,scrollSmooth:!0,scrollContainer:"main",positionFixedSelector:".tocbot",positionFixedClass:"is-position-fixed",fixedSidebarOffset:"auto"})</script><script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"><script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script><script src="/dist/main.js"></script><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css"><script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script><script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script><script>function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });</script><script src="https://cdn.staticfile.org/mathjax/2.7.7/MathJax.js"></script><script src="https://cdn.staticfile.org/mathjax/2.7.7/config/TeX-AMS-MML_HTMLorMML-full.js"></script><script>var ayerConfig={mathjax:!0}</script><script src="/js/busuanzi-2.3.pure.min.js"></script><script src="https://cdn.staticfile.org/animejs/3.2.1/anime.min.js"></script><script src="/js/clickBoom1.js"></script><link rel="stylesheet" href="/css/clipboard.css"><script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script><script>function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);</script><script src="/js/dz.js"></script><script>window.mermaid&&mermaid.initialize({theme:"forest"})</script></div><script type="text/javascript" src="/js/show_text.js"></script></body>